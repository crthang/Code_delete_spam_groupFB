(function(){var a={getDtsg(){try{return require("DTSGInitialData").token}catch(b){return document.getElementsByName("fb_dtsg")[0].value}},getGroupId(){return document.querySelector("div[class='_4-u2 _hoc clearfix _4adj _4-u8']").getAttribute("id").split("_")[1]},getUserId(){try{return require("CurrentUserInitialData").USER_ID}catch(b){return document.cookie.match(/c_user=([0-9]+)/)[1]}},getPostId(){return window.location.href.split("/").slice(-2,-1)[0]},data(){return this.fbDtsg=this.getDtsg(),this.groupId=this.getGroupId(),this.userId=this.getUserId(),this.postId=this.getPostId(),this},uniq(b){return b.filter((c,d,f)=>f.findIndex(g=>g.from.id===c.from.id)===d)},async request(b,c="GET",d,f=300){return new Promise(function(g){setTimeout(async function(){var i;i="GET"===c?await fetch(b):await fetch(b,{method:c,body:d}),g(i)},f)})},async getAccessToken(){var b=new FormData;b.append("fb_dtsg",this.fbDtsg),b.append("app_id","165907476854626"),b.append("redirect_uri","fbconnect://success"),b.append("display","page"),b.append("access_token",""),b.append("from_post",1),b.append("return_format","access_token"),b.append("domain",""),b.append("sso_device","ios"),b.append("__CONFIRM__",1),b.append("__user",this.userId);var c=await this.request("https://www.facebook.com/v1.0/dialog/oauth/confirm","POST",b,0),d=await c.text();return d.match(/access_token=(.*)(?=&expires_in)/)[1]},async getComments(b,c){async function d(l){if(j=f.uniq([...j,...l.data.filter(({message:o})=>k.test(o)||"ch\u1EA5m"===o.toLowerCase()||"cham"===o.toLowerCase()||-1<g.findIndex(p=>p===o))]),!l.paging.next)return 0<j.length?console.log(`Tìm thấy ${j.length} thanh niên`):console.log(`Không có thanh niên nào!`),j;var m=await f.request(l.paging.next),n=await m.json();return await d(n)}console.log("\u0110ang qu\xE9t b\xECnh lu\u1EADn...");var f=this,g=c?c.split("|"):[],h=await this.request(`https://graph.facebook.com/v3.1/${this.groupId}_${this.postId}/comments?access_token=${b}&pretty=1&limit=100`),i=await h.json(),j=[],k=RegExp(/^\.+$/m);return await d(i)},async manhtuannnnnn(b,c){if(0>=b.length)return console.log("Xong");var d=this,f=new FormData;f.append("fb_dtsg",this.fbDtsg),f.append("confirmed",!0),f.append("__user",this.userId),f.append("__a",1),f.append("__pc","PHASED:DEFAULT"),c&&f.append("block_user",1),await d.request(`https://www.facebook.com/ajax/groups/remove_member/?group_id=${this.groupId}&member_id=${b[0].from.id}&source=profile_browser&is_undo=0&dpr=1`,"POST",f),console.log(`${b[0].from.name} đã ra đảo`),await this.manhtuannnnnn(b.slice(1),c)},run(){this.getAccessToken().then(b=>{var c=prompt("Nh\u1EADp t\u1EEB kh\xF3a mu\u1ED1n l\u1ECDc, m\u1EB7c \u0111\u1ECBnh \u0111\xE3 bao g\u1ED3m \".\" v\xE0 \"ch\u1EA5m\". M\u1ED7i t\u1EEB kh\xF3a c\xE1ch nhau d\u1EA5u |");return this.getComments(b,c)}).then(b=>{var c=confirm("B\u1EA1n c\xF3 mu\u1ED1n BLOCK user kh\xF4ng? ok = BLOCK, cancel = KICK");console.log("B\u1EAFt \u0111\u1EA7u tr\u1EA3m..."),this.manhtuannnnnn(b,c)})}};a.data().run()})();
